<!DOCTYPE HTML>
<html>
    <head>
        <title>
            {{data['page_type'].title()}} {{data['check'].replace('_', ' ')}}
        </title>
        <link href="/static/style.css" rel="spreadsheet">
        <link href="https://www.firmus.com.sg/wp-content/uploads/2022/03/SK_196_edited_sq_trans-line.png" rel='icon'>
    </head>

    
    <body>
        {% include "header.html" %}
        <br><br><br>
        <form action="{{data['form_meta']['action']}}" method="{{data['form_meta']['method']}}" id="form">
            <div class="container-1">
                <h1>{{data['check'].replace('_', ' ').upper()}}</h1>
                <div class='container-box'>
                    <div id='check-msg' class='highlight-red'></div>
                    
                    {% if data['path'] == 'confirm' %}
                    <span class="highlight-green">Confirm inputted data.</span>
                    <br><br>
                    {% elif data['path'] == 'success' %}
                        <span class="highlight-green">{{data['check'].replace('_', ' ').upper()}}: Success!</span>
                        <br><br>
                    {% elif data['path'] == 'fail' %}
                    <span class="highlight-red">{{data['check'].title()}} already in the database.</span>
                    <br><br>
                    {% endif %}
                    
                    {% for key, value in data['form_data'].items() %}
                    <div class="grid">
                        <div class='label'>
                            <label for="{{key}}" name="{{key}}">{{key.replace("_", " ").title()}}:</label>
                        </div>
                        {% if data['path'] == 'success' %}
                            <div class="input">
                                {% if data['form_type'][key] == 'radio' %}
                                    <span>{{data['checked'].title()}}</span>
                                {% else %}
                                    <span>{{value.title()}}</span>
                                {% endif %}
                            </div>
                        {% else %}
                            {% if data['form_type'][key] == 'radio' %}
                                <div class='radio'>
                                {% for option in value %}
                                    {% if data['path'] == 'confirm' and data['checked'] == option %}
                                        <input class='radio' id="{{option}}" type="{{data['form_type'][key]}}" name="{{key}}" value="{{option}}" checked>
                                    {% else %}
                                        <input class='radio' id="{{option}}" type="{{data['form_type'][key]}}" name="{{key}}" value="{{option}}" required>
                                    {% endif %}
                                    <label for="{{option}}">{{option.title()}}</label>
                                {% endfor %}
                                </div>
                            {% else %}
                                <div class="input">
                                    <input id="{{key}}" type="{{data['form_type'][key]}}" name="{{key}}" value="{{value}}" required>
                                </div>
                            {% endif %}
                        {% endif %}
                    </div>
                    <br>
                    {% endfor %}
                    
                    <div align='center' class="submit">
                        {% if data['path'] == 'success' %}
                            <input type='submit' value="{{data['page_type'].title()}} another {{data['check'].replace('_', ' ').title()}}" id='submit'>
                        {% else %}
                            <input type='button' value="Submit" id='submit'>
                        {% endif %}
                    </div>
                    
                </div>
            </div>
        </form>
        {% include "footer.html" %}
    </body>
    <script>
        document.getElementById('submit').addEventListener('click', check);
        
        function check() {
            if ("{{data['check']}}" == 'activity') {
                if ("{{data['page_type']}}" == 'add') {
                    var start = document.getElementById('start_date').value;
                    var end = document.getElementById('end_date').value;
                } else {
                    var start = document.getElementById('new_start_date').value;
                    var end = document.getElementById('new_end_date').value; 
                };
                
                if (start > end) {
                    document.getElementById('check-msg').innerHTML = 'Start date must be before end date';
                    document.getElementById('check-msg').style.marginBottom = "10px";
                } else {
                    document.getElementById('submit').type = 'submit'
                };
                
            } else {
                document.getElementById('submit').type = 'submit';
            };
        }
    </script>
</html>